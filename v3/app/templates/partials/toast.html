<div id="toast-container" class="fixed top-5 z-50 w-full flex justify-center"></div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Function to show a custom toast
    function showToast(message, type = "success") {
      const toastContainer = document.getElementById('toast-container');

      // Create a new toast element
      const toast = document.createElement('div');
      toast.className = `max-w-lg w-full bg-white shadow-lg rounded-lg pointer-events-auto mb-2 transition-transform transform translate-y-full opacity-0`;
      toast.innerHTML = `
        <div class="rounded-lg shadow-xs overflow-hidden ${type === 'success' ? 'bg-green-500' : 'bg-red-500'} text-white">
          <div class="p-4 flex items-start justify-between">
            <div class="w-0 flex-1 pt-0.5">
              <p class="text-sm leading-5 font-medium">${message}</p>
            </div>
            <div class="ml-4 flex-shrink-0 flex">
              <button class="inline-flex text-white focus:outline-none focus:text-gray-300 transition ease-in-out duration-150" onclick="this.parentElement.parentElement.parentElement.remove()">
                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
              </button>
            </div>
          </div>
        </div>
      `;

      toastContainer.appendChild(toast);

      // Trigger the animation
      requestAnimationFrame(() => {
        toast.classList.add('translate-y-0', 'opacity-100');
      });

      setTimeout(() => {
        toast.classList.remove('translate-y-0', 'opacity-100');
        toast.classList.add('translate-y-full', 'opacity-0');

        toast.addEventListener('transitionend', () => {
          toast.remove();
        });
      }, 3000);
    }

    // Example of adding toast messages from server-side
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          showToast("{{ message }}", "{{ category }}");
        {% endfor %}
      {% endif %}
    {% endwith %}
  });
</script>

<style>
  .translate-y-full {
    transform: translateY(100%);
  }

  .translate-y-0 {
    transform: translateY(0);
  }

  .opacity-0 {
    opacity: 0;
  }

  .opacity-100 {
    opacity: 1;
  }
</style>
